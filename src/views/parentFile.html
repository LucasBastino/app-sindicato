<!DOCTYPE html>
<html lang="en">
{{template "Head"}}
<body>
    <div id="target-div">
        <div class="container" id="main-container">
            <header>
                <div class="nav-container">
                    <nav class="navbar navbar-expand navbar-light bg-light">
                        <a class="navbar-brand" href="/">←Volver</a>
                        {{if eq .mode "edit"}}
                        <!-- cambiar esto -->
                            <a class="nav-item nav-link active py-0" href="/form/createMember" id="add-parent-btn"><button class="btn-add">Agregar un familiar</button></a>
                        {{end}}
                    </nav>
                </div> 
            </header>
            {{if eq .mode "create" }}
            <form hx-post="/parent/{{$.parent.IdMember}}/create" hx-swap="#target-div">
                <div class="form__section" id="form-section">
                    <div class="page-title">Agregar nuevo familiar</div>
            {{else if eq .mode "edit"}}
            <form hx-put="/parent/{{$.parent.IdMember}}/{{$.parent.IdParent}}/edit" hx-target="#target-div">
                <div class="form__section">
                    <div class="page-title">{{$.parent.LastName}}, {{$.parent.Name}}</div>
            {{end}}
            <input class="form-input field-12" type="text" name="name" value="{{$.parent.Name}}" placeholder="Nombres" disabled required>
            {{with .errorMap.name}}
                <p>{{.}}</p>
            {{end}}
            <input class="form-input field-12" type="text" name="last-name" value="{{$.parent.LastName}}" placeholder="Apellidos" disabled required>
            {{with .errorMap.lastName}}
                <p>{{.}}</p>
            {{end}}
            <input class="form-input field-12" type="text" name="rel" value="{{$.parent.Rel}}" placeholder="Parentesco" disabled required>
            {{with .errorMap.rel}}
                <p>{{.}}</p>
            {{end}}
            <select class="form-input field-12" name="gender" id="gender" onchange="cambiarColorPorDefecto(value, id);" disabled required>
            {{if eq $.parent.Gender ""}}
                <option value="">Género</option>
            {{else}}
                <option value="{{$.parent.Gender}}">{{$.parent.Gender}}</option>
            {{end}}               
                <option value="Masculino">Masculino</option>
                <option value="Femenino">Femenino</option>
                <option value="Otro">Otro</option>
            </select>
            {{with .errorMap.gender}}
                <p>{{.}}</p>
            {{end}}
            <input class="form-input field-12" type="text" name="birthday" value="{{$.parent.Birthday}}" placeholder="Fecha de Nacimiento" disabled required>
            {{with .errorMap.birthday}}
                <p>{{.}}</p>
            {{end}}
            <input class="form-input field-12" type="text" name="cuil" value="{{$.parent.CUIL}}" placeholder="DNI" disabled required>
            {{with .errorMap.cuil}}
                <p>{{.}}</p>
            {{end}}
            <input class="hide" type="number" name="id-member" value="{{$.parent.IdMember}}">

            {{if eq .mode "create"}}
            <button type="submit" class="item-btn">Enviar</button>
            {{else if eq .mode "edit"}}
            <button type="submit" class="item-btn hide btn-submit">Confirmar</button>
            {{end}}
        </div>
    </form>
    
    {{if eq .mode "edit"}}
    <div class="btn-container">
        <button class="item-btn" onclick="enableInputs(); enableSelects(); showConfirmButton();">Editar</button>
        <a href="/member/{{$.parent.IdMember}}/file"><button class="item-btn">Volver al afiliado</button></a>
    </div>
    {{else if eq .mode "create"}}
    <script type="text/javascript">
        enableInputs();
        enableSelects();
        </script>
    {{end}}
</div>
</div>
{{template "Scripts"}}
</body>
</html>
