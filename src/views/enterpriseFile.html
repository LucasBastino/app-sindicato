<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    {{template "Head"}}
<div id="target-div">
    <div class="container" id="main-container">
        <header>
            <div class="nav-container">
                <nav class="navbar navbar-expand navbar-light bg-light">
                    <a class="navbar-brand" href="/">Sindicato</a>              
                    {{if eq .mode "edit"}}
                        <a class="nav-item nav-link active py-0" href="/form/createEnterprise" id="add-enterprise-btn"><button class="btn-add">Agregar una empresa</button></a>
                    {{end}} 
                </nav>
            </div>
        </header>
    {{if eq .mode "create"}}
        <form hx-post="/enterprise/create" hx-target="#target-div">
            <div class="form__section">
                <div class="page-title">Agregar nueva empresa</div>
    {{else if eq .mode "edit"}}
        <form hx-put="/enterprise/{{$.enterprise.IdEnterprise}}/edit" hx-target="#target-div">
            <div class="form__section">
                <div class="page-title">{{$.enterprise.Name}}</div>
    {{end}}
                <div class="title-div field-12">Datos de la empresa</div>
                    <input class="form-input field-12" type="text" name="name" value="{{$.enterprise.Name}}" placeholder="Nombre" disabled>
                    {{with .errorMap.name}}
                        <p>{{.}}</p>
                    {{end}}
                    <input class="form-input field-12" type="text" name="number" value="{{$.enterprise.Number}}" placeholder="Numero de empresa" disabled>
                    {{with .errorMap.number}}
                        <p>{{.}}</p>
                    {{end}}
                    <input class="form-input field-12" type="text" name="address" value="{{$.enterprise.Address}}" placeholder="Direccion" disabled>
                    {{with .errorMap.address}}
                        <p>{{.}}</p>
                    {{end}}
                    <input class="form-input field-12" type="text" name="cuit" value="{{$.enterprise.CUIT}}" placeholder="CUIT" disabled>
                    {{with .errorMap.cuit}}
                        <p>{{.}}</p>
                    {{end}}
                    <input class="form-input field-12" type="text" name="district" value="{{$.enterprise.District}}" placeholder="Localidad" disabled>
                    {{with .errorMap.district}}
                        <p>{{.}}</p>
                    {{end}}
                    <input class="form-input field-12" type="text" name="postal-code" value="{{$.enterprise.PostalCode}}" placeholder="Código postal" disabled>
                    {{with .errorMap.postalCode}}
                        <p>{{.}}</p>
                    {{end}}
                    <input class="form-input field-12" type="text" name="phone" value="{{$.enterprise.Phone}}" placeholder="Teléfono" disabled>
                    {{with .errorMap.phone}}
                        <p>{{.}}</p>
                    {{end}}
                    <div class="form-input field-12">Número de afiliados: {{.numberOfMembers}}</div>
                    {{if eq .mode "create"}}
                    <button type="submit" class="item-btn">Enviar</button>
                    {{else if eq .mode "edit"}}
                    <button type="submit" class="item-btn btn-submit hide">Confirmar</button>
                    {{end}}
            </div>
        </form>
        {{if eq .mode "edit"}}
            <div class="btn-container">
                <button class="item-btn" hx-get="/enterprise/{{$.enterprise.IdEnterprise}}/memberTable" hx-trigger="click" hx-headers='{"mode": "edit"}' hx-target="#tableDiv" onclick="showEnterpriseMemberSearchNav();">Mostrar afiliados</button>
                <button class="item-btn" onclick="enableInputs(); showConfirmButton();">Editar</button>
                <button class="item-btn btn-danger" hx-delete="/enterprise/{{$.enterprise.IdEnterprise}}/delete" hx-headers='{"mode": "edit"}' hx-trigger="click" hx-confirm="¿Estás seguro que deseas eliminar la empresa?" hx-target="#target-div" class="btn btn-danger">Eliminar empresa</button>
            </div>
                <div class="nav-container hide">
                    <nav class="navbar navbar-file navbar-expand navbar-light bg-light hide" id="nav-enterprise-member-search">
                        <div class="navbar-nav">
                            <div class="inner-addon right-addon" id="enterprise-member-search-input">
                            <i class="bi bi-search input-icon"></i>
                            <input class="form-control static-input input-field search-input" name="search-key" type="search" aria-label="Search" 
                            hx-get="/enterprise/{{$.enterprise.IdEnterprise}}/memberTable" hx-trigger="keyup" hx-headers='{"mode": "edit"}' hx-target="#tableDiv"></input>
                            </div> 
                        </div>
                    </nav>
                </div>
                <div id="tableDiv"></div> 
        {{end}}
    </div>
</div>
{{template "Scripts"}}
    



{{if eq .mode "create"}}
    <script type="text/javascript">
        enableInputs();
        enableSelects();
        hideAddEnterpriseBtn();
        hideAddMemberBtn();
    </script>
{{else if eq .mode "edit"}}
    <script>
        hideMemberSearchInput();
        hideEnterpriseSearchInput();
        showAddEnterpriseBtn(); 
        hideAddMemberBtn();
    </script>
{{end}}

</body>
</html>
